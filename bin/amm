#!/bin/bash

if [[ "$SPARK_SCALA_VERSION" =~ 2.11 ]]; then
  scala_version=${SCALA_VERSION:-2.11.8}
  amm_version=${AMMONITE_VERSION:-1.6.7}
else
  scala_version=${SCALA_VERSION:-2.12.8}
  amm_version=${AMMONITE_VERSION:-2.0.1+}
fi

set -o xtrace

bin/coursier launch --java-opt=-Xmx4096m --java-opt=-XX:+UseG1GC \
  "com.lihaoyi:ammonite_${scala_version}:${amm_version}" \
  -M ammonite.Main -- "$@"
